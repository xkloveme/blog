---
layout: post
title: å¦‚ä½•ä¸Šä¼ è‡ªå·±çš„UIç»„ä»¶åŒ…
date: 2019-10-12
tags: [vue, GitHub, æ•™ç¨‹]
categories: å‰ç«¯
---

# å¼€ç¯‡

> è¥¿é£å¹è€æ´åº­æ³¢ï¼Œä¸€å¤œæ¹˜å›ç™½å‘å¤šã€‚
> é†‰åä¸çŸ¥å¤©åœ¨æ°´ï¼Œæ»¡èˆ¹æ¸…æ¢¦å‹æ˜Ÿæ²³ã€‚


## å‰è¨€

 **èº«ä¸ºç¨‹åºå‘˜,è¿˜æ²¡æœ‰è‡ªå·±çš„åŒ…,æ€»æ„Ÿè§‰ç¼ºç‚¹ä»€ä¹ˆ,å¥³æœ‹å‹å’ŒåŒ…è‡³å°‘å ä¸€æ ·å§.æ­£å¦‚ä¸Šæˆ˜åœºæ²¡æœ‰æ‰›æªçš„å£«å…µ,åƒé¥­å°‘äº†ç­·å­ä¸€æ ·,ä»¤äººå¿ƒæƒ…ä¸æ„‰æ‚¦.åŒæ—¶ç»å¸¸ä¼šæœ‰é¢è¯•å®˜ä¼šé—®ä¸€ä¸ªçŠ€åˆ©çš„é—®é¢˜,ä½ æœ‰è‡ªå·±å¼€æºé¡¹ç›®ä¹ˆ?ä½ å†™è¿‡å…¬å¸è‡ªå·±çš„UIç»„ä»¶ä¹ˆ?å¦‚åŒé›·åŠˆ,æ€»è§‰å¾—æ¯”åˆ«äººçŸ®ä¸€æˆª,é‚£ä¹ˆä»Šå¤©å°±ä»¥[hekr-ui](https://hy.hekr.me/hk-ui/web/index.html)ä¸ºä¾‹,ä»‹ç»ä¸€ä¸‹å¦‚ä½•æ‰“é€ è‡ªå·±çš„UIåº“å§**

- [æ–‡æ¡£åœ°å€](https://hy.hekr.me/hk-ui/web/index.html)
- [é¡¹ç›®æºç ](https://github.com/xkloveme/hk-ui)

## é€‰å‹

> æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ„å»ºä¸€ä¸ªä»¥`Vue`ä¸ºåŸºç¡€åŸºäº`element-ui`çš„UIæ¡†æ¶

- æ–‡æ¡£é€‰ç”¨ `Vuepress` æ„å»º,ç®€å•ä¾¿æ·
- æ‰“åŒ…é€‰æ‹© `gitlab CI` ,æœ¬æ–‡ä»¥ `travis` ä¸ºä¾‹
- åˆå§‹åŒ–é‡‡ç”¨`vue-cli 3.0`ã€`pug`å’Œ`sass`ç­‰ç›¸å…³ä¾èµ–å’Œæ’ä»¶(è‡ªè¡Œæ¢ç´¢)

## ç›®çš„

1. å¿«é€Ÿæ„å»ºå±äºâ¤ï¸è‡ªå·±`npm`åº“
2. ç†Ÿæ‚‰æ‰“åŒ…ğŸ“¦å‘½ä»¤åŠå…¶è¯­æ³•
3. ç†Ÿç»ƒæŒæ¡è‡ªåŠ¨åŒ–ğŸ‘·æ„å»º
4. ä¸ºç¤¾åŒºè´¡çŒ®è‡ªå·±ä¸€ä»½è„šå°ğŸ‘£

# åˆæ­¥æ„æ€

## å¯åŠ¨ä¸€ä¸ªé¡¹ç›®

### 1.åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®

> è¿™é‡Œæ¨èä½¿ç”¨[`Vue CLI`](https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create) æ¥è¿›è¡Œå¿«é€Ÿæ„å»º

![åˆå§‹åŒ–.jpg](https://s2.ax1x.com/2019/10/10/uThubn.jpg)

```bash
vue create hekr-ui
```

æˆ‘ä»¬é€‰æ‹©é»˜è®¤é…ç½®å°±å¯ä»¥äº†

### 2.å…³è”ä»£ç åˆ°ä½ çš„åº“

> `git`å¯ä»¥å¾ˆå¥½å¯¹ä»£ç ç‰ˆæœ¬è¿›è¡Œç®¡ç†

- å½“ä½ åˆå§‹åŒ–åº“æ—¶

```bash
echo "# hekr-ui" >> README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/xkloveme/hekr-ui.git
git push -u origin master
```

- å…³è”æœ¬åœ°åº“æ—¶

```bash
git remote add origin https://github.com/xkloveme/hekr-ui.git
git push -u origin master
```

å½“ç„¶æˆ‘ä»¬é€‰æ‹©ç¬¬äºŒç§.è®°å¾—æŠŠ`node_modules`å¿½ç•¥

## é…ç½®ä½ çš„é¡¹ç›®

### 1.æ·»åŠ ç›¸å…³ä¾èµ–

> æœ¬æ–‡ä»¥`yarn`ä¸ºä¸»,å½“ç„¶`npm`ä¹Ÿæ˜¯ğŸ‘ŒOKçš„

æˆ‘ä»¬ä»¥`vuepress`ä¸ºä¸»ç¼–å†™æ–‡æ¡£,å½“ç„¶è¿™æ˜¯éå¿…é¡»çš„,å¦‚æœæ‚¨åªæƒ³å‘ä¸€ä¸ªåŒ…,å¯ä»¥çœç•¥æ­¤æ­¥,å¿…è¦çš„`demo`å’Œæµ‹è¯•ä¼šæœ‰æå¤§çš„æ–¹ä¾¿

```bash
# å°† VuePress ä½œä¸ºä¸€ä¸ªæœ¬åœ°ä¾èµ–å®‰è£…
yarn add -D vuepress # æˆ–è€…ï¼šnpm install -D vuepress

# æ–°å»ºä¸€ä¸ª docs æ–‡ä»¶å¤¹
mkdir docs

# æ–°å»ºä¸€ä¸ª markdown æ–‡ä»¶
echo '# Hello VuePress!' > docs/README.md

# å¼€å§‹å†™ä½œ
npx vuepress dev docs
```

æ¥ç€ï¼Œåœ¨ `package.json` é‡ŒåŠ ä¸€äº›è„šæœ¬:

```json
{
  "scripts": {
    "docs:dev": "vuepress dev docs",
    "docs:build": "vuepress build docs"
  }
}
```

ç„¶åå°±å¯ä»¥å¼€å§‹å†™ä½œäº†:

```bash
yarn docs:dev # æˆ–è€…ï¼šnpm run docs:dev
```

è¦ç”Ÿæˆé™æ€çš„ HTML æ–‡ä»¶ï¼Œè¿è¡Œï¼š

```bash
yarn docs:build # æˆ–è€…ï¼šnpm run docs:build
```

æ·»åŠ å…¶ä»–ä¾èµ–,å¸¸ç”¨è¯­æ³•

```bash
// å®‰è£…æŒ‡å®šåŒ…
yarn add *** 
// å®‰è£…æ‰€æœ‰åŒ…,æ³¨æ„å’Œnpmçš„åŒºåˆ«
yarn
```

æ³¨æ„âš ï¸è¿™ä¸¤è€…çš„åŒºåˆ«`dependencies`å’Œ`devDependencies`

1. `--save` å°†ä¾èµ–çš„åç§°ã€ç‰ˆæœ¬è¦æ±‚æ·»åŠ åˆ° `dependencies`
2. `--save-dev` å°†ä¾èµ–çš„åç§°ã€ç‰ˆæœ¬è¦æ±‚æ·»åŠ åˆ° `devDependencies`

### 2.ä¸€äº›çº¦å®šä¿—æˆçš„ç›®å½•ç»“æ„

- åœ¨ä½¿ç”¨`vuepress`å¼€å‘æ—¶,çº¦å®šäº†ä¸€äº›ç›®å½•ç»“æ„

```docs
.
â”œâ”€â”€ docs
â”‚   â”œâ”€â”€ .vuepress (å¯é€‰çš„)
â”‚   â”‚   â”œâ”€â”€ components (å¯é€‰çš„)
â”‚   â”‚   â”œâ”€â”€ theme (å¯é€‰çš„)
â”‚   â”‚   â”‚   â””â”€â”€ Layout.vue
â”‚   â”‚   â”œâ”€â”€ public (å¯é€‰çš„)
â”‚   â”‚   â”œâ”€â”€ styles (å¯é€‰çš„)
â”‚   â”‚   â”‚   â”œâ”€â”€ index.styl
â”‚   â”‚   â”‚   â””â”€â”€ palette.styl
â”‚   â”‚   â”œâ”€â”€ templates (å¯é€‰çš„, è°¨æ…é…ç½®)
â”‚   â”‚   â”‚   â”œâ”€â”€ dev.html
â”‚   â”‚   â”‚   â””â”€â”€ ssr.html
â”‚   â”‚   â”œâ”€â”€ config.js (å¯é€‰çš„)
â”‚   â”‚   â””â”€â”€ enhanceApp.js (å¯é€‰çš„)
â”‚   â”‚ 
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ guide
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â””â”€â”€ config.md
â”‚ 
â””â”€â”€ package.json
```

- åœ¨æœ¬é¡¹ç›®ä¸­ç›®å½•ç»“æ„ä¸º

![ç»“æ„.jpg](https://s2.ax1x.com/2019/10/10/uThQU0.jpg)

```tree
template
â”œâ”€ docs
â”‚    â””â”€ .vuepress            # é…ç½®ã€æ¼”ç¤ºç»„ä»¶ã€é™æ€èµ„æº
â”‚    â”‚    â”œâ”€ compnents        # æ¼”ç¤ºç»„ä»¶
â”‚    â”‚    |    â””â”€ demo          # demoç»„ä»¶
â”‚    â”‚    â”œâ”€ public           # é™æ€èµ„æº
â”‚    â”‚    |    â””â”€ images        # å›¾ç‰‡æ–‡ä»¶
â”‚    â”‚    |    â””â”€ scss          # æ ·å¼æ–‡ä»¶
â”‚    â”‚    â”œâ”€ config.js        # é…ç½®æ–‡ä»¶
â”‚    â”‚    â””â”€ enhanceApp       # å¼•å…¥æ–‡ä»¶
|    â”œâ”€ compnent             # ç»„ä»¶mdæ–‡ä»¶
|    â””â”€ README              # é¦–é¡µmd
â”œâ”€ packages
â”‚    â”œâ”€ index.js             # ç»„ä»¶index.js
â”‚    â””â”€ hk-countup           # countupç»„ä»¶
â”œâ”€ public
â””â”€ package.json
```

### 3.ä¿®æ”¹ä½ çš„`package.json`æ–‡ä»¶

> è¿™ä¸ªæ–‡ä»¶æ˜¯é¡¹ç›®çš„çµé­‚ğŸ‘»,æ˜¯æœ€é‡è¦çš„æ–‡ä»¶ä¹‹ä¸€.å…·ä½“å­—æ®µå‚è€ƒ[packagejson](http://javascript.ruanyifeng.com/nodejs/packagejson.html)

![ç›®å½•.jpg](https://s2.ax1x.com/2019/10/10/uThl5V.jpg)

- ä¿®æ”¹ä¸»å…¥å£`main`

> `main`å­—æ®µæŒ‡å®šäº†åŠ è½½çš„å…¥å£æ–‡ä»¶ï¼Œ`require('moduleName')`å°±ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„`index.js`ã€‚

```bash
"main": "dist/hekr-ui.umd.min.js"
```

> ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å°†ä¸€ä¸ªå•ç‹¬çš„å…¥å£æ„å»ºä¸ºä¸€ä¸ªåº“

```bash
vue-cli-service build --target lib --name myLib [entry]
```

è¿è¡Œç»“æœä¸º:

```bash
  File                     Size                     Gzipped

  dist/hk-ui.umd.min.js    13.64 KiB                5.31 KiB
  dist/hk-ui.umd.js        43.87 KiB                11.37 KiB
  dist/hk-ui.common.js     43.49 KiB                11.25 KiB
  dist/hk-ui.css           0.54 KiB                 0.29 KiB
```

- æ·»åŠ `lib`å‘½ä»¤

```bash
    "lib": "vue-cli-service build --target lib --name hk-ui --dest dist ./src/packages/index.js"
```

è¿™ä¸ªå…¥å£å¯ä»¥æ˜¯ä¸€ä¸ª `.js` æˆ–ä¸€ä¸ª `.vue` æ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šå…¥å£ï¼Œåˆ™ä¼šä½¿ç”¨ `src/App.vue`ã€‚

æ„å»ºä¸€ä¸ªåº“ä¼šè¾“å‡ºï¼š

- `dist/myLib.common.js`ï¼šä¸€ä¸ªç»™æ‰“åŒ…å™¨ç”¨çš„ CommonJS åŒ… (ä¸å¹¸çš„æ˜¯ï¼Œwebpack ç›®å‰è¿˜å¹¶æ²¡æœ‰æ”¯æŒ ES modules è¾“å‡ºæ ¼å¼çš„åŒ…)

- `dist/myLib.umd.js`ï¼šä¸€ä¸ªç›´æ¥ç»™æµè§ˆå™¨æˆ– AMD loader ä½¿ç”¨çš„ UMD åŒ…

- `dist/myLib.umd.min.js`ï¼šå‹ç¼©åçš„ UMD æ„å»ºç‰ˆæœ¬

- `dist/myLib.css`ï¼šæå–å‡ºæ¥çš„ CSS æ–‡ä»¶ (å¯ä»¥é€šè¿‡åœ¨ `vue.config.js` ä¸­è®¾ç½® `css: { extract: false }` å¼ºåˆ¶å†…è”)

### 4. æ–‡æ¡£é…ç½®

![æ–‡æ¡£.jpg](https://s2.ax1x.com/2019/10/10/uTIdVs.jpg)

> é¡¹ç›®å¯åŠ¨ä¹‹åéœ€è¦æˆ‘ä»¬é…ç½®æˆ‘ä»¬çš„`vuepress`

```js
/*
 * @describe: é…ç½®æ–‡ä»¶ config.js
 * @Author: superDragon
 * @Date: 2019-10-09 23:25:49
 * @LastEditors: superDragon
 * @LastEditTime: 2019-10-10 18:49:25
 */
let component = [
  'hk-button',
  'hk-card'
]
module.exports = {
  base: '/hekr-ui/',
  title: 'hekr-ui',
  description: 'hekr-ui',
  themeConfig: {
    nav: [
      { text: 'é¦–é¡µ', link: '/' },
      {
        text: 'ç»„ä»¶',
        link: '/component/hk-button'
      }
    ],
    sidebar: {
      '/component/': component
    },
    lastUpdated: 'æœ€åæ›´æ–°',
    repo: '',
    repoLabel: 'GitLab'
  },
  plugins: [],
  serviceWorker: true
}
```

å½“æˆ‘ä»¬èƒ½å¤ŸæˆåŠŸè¿è¡Œä¸‹é¢æ—¶

```js
    "docs:dev": "vuepress dev docs",
    "docs:build": "vuepress build docs",
```

- æœ¬åœ°è¿è¡Œ


    yarn docs:dev # æˆ–è€…ï¼šnpm run docs:dev

- æ‰“åŒ…


    yarn docs:build # æˆ–è€…ï¼šnpm run docs:build

### 5.æŒç»­é›†æˆ

> ä»¥`GitHub Pages` å’Œ`Travis CI` ä¸ºä¾‹

- æ‰“åŒ…åæ”¾ç½®åœ¨é¡¹ç›®çš„ `docs` ç›®å½•ä¸­çš„`dist`ä¸­,æ³¨æ„âš ï¸åŒºåˆ†ï¼›
- ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„æ„å»ºè¾“å‡ºä½ç½®ï¼›
- VuePress ä»¥æœ¬åœ°ä¾èµ–çš„å½¢å¼è¢«å®‰è£…åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå¹¶ä¸”é…ç½®äº†å¦‚ä¸‹çš„ npm scripts:

```json
{
  "scripts": {
    "docs:build": "vuepress build docs"
  }
}
```

1. åœ¨ `docs/.vuepress/config.js` ä¸­è®¾ç½®æ­£ç¡®çš„ `base`è¿™é‡Œæˆ‘ä»¬è®¾ç½®`/hekr-ui/` ğŸŒ¿ã€‚

   å¦‚æœä½ æ‰“ç®—å‘å¸ƒåˆ° `https://<USERNAME>.github.io/`ï¼Œåˆ™å¯ä»¥çœç•¥è¿™ä¸€æ­¥ï¼Œå› ä¸º `base` é»˜è®¤å³æ˜¯ `"/"`ã€‚

   å¦‚æœä½ æ‰“ç®—å‘å¸ƒåˆ° `https://<USERNAME>.github.io/<REPO>/`ï¼ˆä¹Ÿå°±æ˜¯è¯´ä½ çš„ä»“åº“åœ¨ `https://github.com/<USERNAME>/<REPO>`ï¼‰ï¼Œåˆ™å°† `base` è®¾ç½®ä¸º `"/<REPO>/"`ã€‚

2. åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå¦‚ä¸‹çš„ `.travis.yml` æ–‡ä»¶ğŸ“ƒ:

```yml
language: node_js
node_js:
  - '8'

install:
  - npm install

script:
  - npm run build

after_success:
  - cd ./docs/.vuepress/dist
  - git init
  - git config --global user.name "${U_NAME}"
  - git config --global user.email "${U_EMAIL}"
  - git add .
  - git commit -m "ğŸ‘·â€Automatically update from travis-ci ğŸ‘·â€"
  - git push --quiet --force  "https://${GH_TOKEN}@${GH_REF}" master:${P_BRANCH}

branches:
  only:
    - master

notifications:
  email:
    - xkloveme@163.com
  on_failure: always

# Note: you should set Environment Variables here or 'Settings' on travis-ci.org
env:
  global:
    # æˆ‘å°†å…¶æ·»åŠ åˆ°äº†travis-ciçš„ç¯å¢ƒå˜é‡ä¸­
    - U_NAME: xkloveme
    - U_EMAIL: xkloveme@qq.com
    - P_BRANCH: gh-pages
    - GH_REF: github.com/xkloveme/vue-v-xxx.git
```

3. æ³¨å†Œ`github`ã€`travis`å’Œé…ç½®`travis`ç›¸å…³,å¯ç”¨æ„å»º,è‡ªè¡Œ`Google`[ä¼ é€é—¨](https://docs.travis-ci.com/user/deployment/pages/)
4. æ›´å¤šé…ç½®å‚è€ƒ[vuepresséƒ¨ç½²](https://vuepress.vuejs.org/zh/guide/deploy.html)

# å®è·µ

## å®Œå–„ç»„ä»¶å¹¶æ‰“åŒ…

> ä»¥ç¼–å†™`hk-button`ç»„ä»¶ä¸ºä¾‹,å¹¶å¯¼å‡º

1. æ·»åŠ ç»„ä»¶åŠå¯¼å‡º

```vue
<template lang="pug">
el-tooltip(effect="dark" v-if="tips" :content="tips" placement="top-start")
  el-button.hk-button(:size="size" :type="type" v-bind="$attrs" @click="handleClick")
    slot
el-button.hk-button(:size="size" v-else :type="type" v-bind="$attrs" @click="handleClick")
  slot
</template>

<script>
import { Debounce } from './../util/debounce'
export default {
  name: 'hk-button',
  props: {
    type: {
      type: String,
      default: 'primary'
    },
    size: {
      type: String,
      default: 'medium'
    },
    tips: {
      type: String,
      default: null
    }
  },
  methods: {
    handleClick: Debounce(function (e) {
      this.$emit('click', e)
    }, 200)
  }
}
</script>

<style lang="scss">
.hk-button {
  i + span {
    padding-left: 10px;
  }
}
</style>

```
2. å¯¼å‡ºç»„ä»¶

```js
import HkButton from './hk-button'

export default HkButton
```
3. å¯¼å‡ºä¸º`install`

```js
/*
 * @describe: ä¸»å…¥å£,å¯¼å‡ºinstall
 * @Author: superDragon
 * @Date: 2019-10-09 23:21:11
 * @LastEditors: superDragon
 * @LastEditTime: 2019-10-10 19:09:57
 */
import HkButton from './hk-button'
import HKcard from './hk-card'

const install = Vue => {
  Vue.component(HkButton.name, HkButton)
  Vue.component(HKcard.name, HKcard)
}

if (typeof window !== 'undefined' && window.Vue) {
  install(window.Vue)
}

export {
  HkButton,
  HKcard
}

export default { install }

```

## ä¸Šä¼ è‡ªå·±çš„`npm`

###  æ³¨å†ŒÂ®ï¸å¹¶åˆ‡æ¢åˆ°å®˜æ–¹`npm`æº
![æ¢æº.jpg](https://s2.ax1x.com/2019/10/10/uTjYY4.jpg)

###  æ³¨å†Œç™»é™†`npm`

```bash
npm adduser        //å›è½¦å,å¼¹å‡ºUsername:  
Username:          //è¾“å…¥ä½ åœ¨å®˜ç½‘æ³¨å†Œæ—¶çš„ç”¨æˆ·å,å›è½¦
Password:          //è¾“å…¥å®˜ç½‘æ³¨å†Œçš„å¯†ç ,å¯†ç çœ‹ä¸è§,è¯·ç¡®ä¿ä½ è¾“çš„å¯†ç æ­£ç¡®, å›è½¦
Email:(this is Public)    //è¾“å…¥å®˜ç½‘æ³¨å†Œæ—¶ç»‘å®šçš„é‚®ç®±,å›è½¦
```

### ä¸Šä¼ 

```bash
npm publish        //æ­¤å¤„ä¸Šä¼ å‘½ä»¤,å›è½¦
```
![å‘å¸ƒ.jpg](https://s2.ax1x.com/2019/10/10/uTvZB6.jpg)

è¿™æ ·ä¸€ä¸ª`hekr-ui`å°±å‘å¸ƒå®Œæˆäº†
### æ’¤é”€
> 24å°æ—¶å†…æ’¤é”€ä¹Ÿæ˜¯å¾ˆç®€å•çš„.
```bash
npm unpublish --force 
```


# å¤§åŠŸå‘Šæˆ

> Let's enjoy the taste of life, if we feel, the more we will live longer.

è§‰å¾—ä¸é”™çš„è¯ç»™ä¸ª`star`
- æœ¬æ–‡æ¼”ç¤ºåº“åœ°å€[hekr-ui](https://github.com/xkloveme/hekr-ui)
- [æ–‡æ¡£åœ°å€](https://hy.hekr.me/hk-ui/web/index.html)
- [é¡¹ç›®æºç ](https://github.com/xkloveme/hk-ui)
